#! /bin/sh

RSCRIPT_BIN=${R_HOME}/bin${R_ARCH_BIN}/Rscript.exe
R_BIN=${R_HOME}/bin${R_ARCH_BIN}/R.exe
CMAKE_BIN=`which cmake`

cd src

sh download_vtk.sh ${RSCRIPT_BIN} ${R_BIN}
sh build_vtk_win.sh ${CMAKE_BIN}
NCORES=`${RSCRIPT_BIN} -e "cat(parallel::detectCores(logical = FALSE))"`
sh install_vtk.sh ${CMAKE_BIN} ${NCORES}
sh generate_makevars.sh "PKG_LIBS = \$(LAPACK_LIBS) \$(BLAS_LIBS) \$(FLIBS) -Lvtk/lib -lvtk_all -lwsock32 -lws2_32 -lgdi32 -lpsapi"
